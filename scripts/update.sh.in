#!/bin/bash

locales=(`ls LOCALE_DIR | grep "[a-z]\{2\}_[A-Z]\{2\}"`)

for i in "${locales[@]}" ; do
    echo "Processing locale: $i"
    f=LOCALE_DIR/$i/LC_MESSAGES/DOMAIN
    if [ ! -d LOCALE_DIR/$i/LC_MESSAGES ]; then
        mkdir -p LOCALE_DIR/$i/LC_MESSAGES
    fi

    if [ -e $f.po ]; then
        msgmerge -v -U $f.po TEMPLATE
        msgfmt -v $f.po -o $f.mo
    else
        cp -v TEMPLATE $f.po
    fi
    echo ""
done
